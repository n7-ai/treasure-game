import{_ as m,g as h,c,u as U,a as u,b as s,i as f,v as b,t as a,o as i,f as k,F as P,r as $,n as x,d as I,j as p,h as g}from"./index-D48sWsnT.js";const C={name:"UserProfile",props:{user:{type:Object,required:!0}},emits:["save-user"],setup(l,{emit:e}){const o=U(),r=h({username:l.user.username,title:l.user.title}),n=c(()=>o.getters["game/overallProgress"]);return{localUser:r,overallProgress:n,saveUser:()=>{if(!r.value.username.trim()){alert("请输入用户名");return}e("save-user",r.value)}}}},y={class:"user-profile"},L={class:"user-form"},R={class:"form-group"},S={class:"form-group"},V={class:"user-stats"},N={class:"stats-grid"},B={class:"stat-item"},j={class:"stat-value"},q={class:"stat-item"},w={class:"stat-value"};function z(l,e,o,r,n,v){return i(),u("div",y,[e[8]||(e[8]=s("h3",null,"用户信息",-1)),s("div",L,[s("div",R,[e[3]||(e[3]=s("label",null,"用户名",-1)),f(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r.localUser.username=t),placeholder:"输入您的用户名"},null,512),[[b,r.localUser.username]])]),s("div",S,[e[4]||(e[4]=s("label",null,"探险家称号",-1)),f(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>r.localUser.title=t),placeholder:"输入您的称号"},null,512),[[b,r.localUser.title]])]),s("button",{class:"save-btn",onClick:e[2]||(e[2]=(...t)=>r.saveUser&&r.saveUser(...t))},"保存用户信息")]),s("div",V,[e[7]||(e[7]=s("h4",null,"探险统计",-1)),s("div",N,[s("div",B,[s("div",j,a(o.user.treasures),1),e[5]||(e[5]=s("div",{class:"stat-label"},"发现宝藏",-1))]),s("div",q,[s("div",w,a(r.overallProgress)+"%",1),e[6]||(e[6]=s("div",{class:"stat-label"},"总体进度",-1))])])])])}const D=m(C,[["render",z],["__scopeId","data-v-af3f3590"]]),F={name:"Leaderboard",props:{leaderboard:{type:Array,required:!0},userRank:{type:Number,default:0}}},T={class:"leaderboard"},A={key:0,class:"user-rank"},E={class:"leaderboard-table"},M={class:"progress-cell"},O={class:"mini-progress"};function G(l,e,o,r,n,v){return i(),u("div",T,[e[1]||(e[1]=s("h3",null,"探险家排行榜",-1)),o.userRank?(i(),u("div",A,[s("h4",null,"您的排名: 第 "+a(o.userRank)+" 名",1)])):k("",!0),s("table",E,[e[0]||(e[0]=s("thead",null,[s("tr",null,[s("th",null,"排名"),s("th",null,"用户名"),s("th",null,"称号"),s("th",null,"进度"),s("th",null,"宝藏")])],-1)),s("tbody",null,[(i(!0),u(P,null,$(o.leaderboard,(t,d)=>(i(),u("tr",{key:t.id,class:x(`rank-${d+1}`)},[s("td",null,a(d+1),1),s("td",null,a(t.username),1),s("td",null,a(t.title),1),s("td",null,[s("div",M,[s("span",null,a(t.progress)+"%",1),s("div",O,[s("div",{class:"mini-progress-bar",style:I({width:t.progress+"%"})},null,4)])])]),s("td",null,a(t.treasures)+"个",1)],2))),128))])])])}const H=m(F,[["render",G],["__scopeId","data-v-266f2115"]]),J={name:"UserCenter",components:{UserProfile:D,Leaderboard:H},setup(){const l=U(),e=c(()=>l.state.user),o=c(()=>l.state.user.leaderboard),r=c(()=>l.getters["game/overallProgress"]),n=c(()=>{const t=r.value,d=e.value.treasures;return o.value.findIndex(_=>_.progress<t||_.progress===t&&_.treasures<d)+1||o.value.length+1});return{user:e,leaderboard:o,userRank:n,saveUserInfo:t=>{l.dispatch("user/saveUserInfo",t)}}}},K={class:"user-center"},Q={class:"user-sections"};function W(l,e,o,r,n,v){const t=g("UserProfile"),d=g("Leaderboard");return i(),u("div",K,[e[0]||(e[0]=s("h2",null,"用户中心",-1)),s("div",Q,[p(t,{user:r.user,onSaveUser:r.saveUserInfo},null,8,["user","onSaveUser"]),p(d,{leaderboard:r.leaderboard,"user-rank":r.userRank},null,8,["leaderboard","user-rank"])])])}const Y=m(J,[["render",W],["__scopeId","data-v-f2783b65"]]);export{Y as default};
