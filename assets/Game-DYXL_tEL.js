import{_ as p,c as m,u as g,a as _,b as s,F as v,r as C,o as r,n as L,t as i,w as f,d as x,e as E,f as b,g as k,h}from"./index-D48sWsnT.js";const S={name:"PanoramaMap",emits:["location-selected"],setup(t,{emit:o}){const n=g();return{locations:m(()=>n.state.game.locations),selectLocation:l=>{o("location-selected",l)}}}},T={class:"panorama-container"},R={class:"map-background"},$=["onClick","title"],P={class:"location-icon"},U={class:"location-name"},y={class:"location-progress"};function N(t,o,n,e,d,l){return r(),_("div",T,[o[0]||(o[0]=s("h2",{class:"map-title"},"神秘世界地图",-1)),o[1]||(o[1]=s("p",{class:"map-description"},"点击地图上的地点开始探索",-1)),s("div",R,[(r(!0),_(v,null,C(e.locations,c=>(r(),_("div",{key:c.id,class:L(["location",`location-${c.id}`]),onClick:u=>e.selectLocation(c),title:c.name},[s("div",P,i(c.icon),1),s("div",U,i(c.name),1),s("div",y,i(c.progress)+"%",1)],10,$))),128))])])}const B=p(S,[["render",N],["__scopeId","data-v-48b6e899"]]),I={name:"LocationPage",props:{location:{type:Object,required:!0},clue:{type:String,default:'点击"开始探索"按钮开始你的冒险...'},isExploring:{type:Boolean,default:!1}},emits:["explore","back"],setup(t){const o=g(),n=m(()=>t.location?t.location.progress:0);return f(()=>t.location,e=>{e&&e.clues&&e.clues.length>0?o.commit("game/SET_CURRENT_CLUE",e.clues[e.clues.length-1]):o.commit("game/SET_CURRENT_CLUE",'点击"开始探索"按钮开始你的冒险...')}),{currentLocationProgress:n}}},M={class:"location-page"},V={class:"location-title"},O={class:"location-description"},G={class:"progress-container"},z={class:"progress-bar"},F={class:"clue-container"},j={class:"current-clue"},q={class:"action-buttons"},A=["disabled"];function D(t,o,n,e,d,l){return r(),_("div",M,[s("h2",V,i(n.location.name),1),s("p",O,i(n.location.description),1),s("div",G,[s("p",null,"探索进度: "+i(e.currentLocationProgress)+"%",1),s("div",z,[s("div",{class:"progress",style:x({width:e.currentLocationProgress+"%"})},null,4)])]),s("div",F,[o[2]||(o[2]=s("h3",null,"探索发现",-1)),s("p",j,i(n.clue),1)]),s("div",q,[s("button",{class:"action-btn",onClick:o[0]||(o[0]=c=>t.$emit("explore")),disabled:n.isExploring},i(n.isExploring?"探索中...":"开始探索"),9,A),s("button",{class:"action-btn secondary",onClick:o[1]||(o[1]=c=>t.$emit("back"))}," 返回地图 ")])])}const X=p(I,[["render",D],["__scopeId","data-v-79f3b5c8"]]),w={name:"Game",components:{PanoramaMap:B,LocationPage:X},setup(){const t=g(),o=k("map"),n=m(()=>t.state.game.currentLocation),e=m(()=>t.state.game.currentClue),d=m(()=>t.state.game.isExploring),l=a=>{t.commit("game/SET_IS_EXPLORING",!1),t.commit("game/SET_CURRENT_LOCATION",a),a.clues&&a.clues.length>0?t.commit("game/SET_CURRENT_CLUE",a.clues[a.clues.length-1]):t.commit("game/SET_CURRENT_CLUE",'点击"开始探索"按钮开始你的冒险...'),o.value="location"},c=()=>{o.value="map"},u=()=>{t.dispatch("game/exploreLocation")};return f(n,a=>{a&&a.clues&&a.clues.length>0&&t.commit("game/SET_CURRENT_CLUE",a.clues[a.clues.length-1])}),{currentView:o,currentLocation:n,currentClue:e,isExploring:d,enterLocation:l,showMap:c,exploreLocation:u}}},H={class:"game-container"},J={class:"game-content"};function K(t,o,n,e,d,l){const c=h("PanoramaMap"),u=h("LocationPage");return r(),_("div",H,[s("div",J,[e.currentView==="map"?(r(),E(c,{key:0,onLocationSelected:e.enterLocation},null,8,["onLocationSelected"])):e.currentView==="location"?(r(),E(u,{key:1,location:e.currentLocation,clue:e.currentClue,"is-exploring":e.isExploring,onExplore:e.exploreLocation,onBack:e.showMap},null,8,["location","clue","is-exploring","onExplore","onBack"])):b("",!0)])])}const W=p(w,[["render",K],["__scopeId","data-v-905c4638"]]);export{W as default};
